Version 4
SHEET 1 1588 1200
WIRE -16 80 -48 80
WIRE -384 176 -416 176
WIRE -272 176 -288 176
WIRE -160 176 -176 176
WIRE -48 176 -48 80
WIRE -48 176 -64 176
WIRE -32 176 -48 176
WIRE 80 176 64 176
WIRE 192 176 176 176
WIRE 304 176 288 176
WIRE 416 176 400 176
WIRE 432 176 416 176
WIRE 544 176 528 176
WIRE 656 176 640 176
WIRE 768 176 752 176
WIRE 880 176 864 176
WIRE 992 176 976 176
WIRE 1120 176 1088 176
WIRE -416 240 -416 176
WIRE 416 256 416 176
WIRE 704 256 704 224
WIRE 704 256 416 256
WIRE 16 288 16 224
WIRE 64 288 16 288
WIRE 352 288 352 224
WIRE 400 288 352 288
WIRE 1120 352 1120 176
WIRE 1120 352 96 352
WIRE -416 368 -416 320
WIRE 688 416 -64 416
WIRE 96 512 96 352
WIRE 112 512 96 512
WIRE 160 512 112 512
WIRE 352 512 304 512
WIRE 400 512 352 512
WIRE 528 512 496 512
WIRE 560 512 528 512
WIRE 688 512 688 416
WIRE 688 512 656 512
WIRE 832 512 784 512
WIRE -64 544 -64 416
WIRE -32 544 -64 544
WIRE 112 544 64 544
WIRE 160 544 112 544
WIRE 784 560 784 512
WIRE -32 576 -64 576
WIRE 112 576 64 576
WIRE 160 576 112 576
WIRE 160 608 128 608
WIRE 128 672 128 608
WIRE 352 672 128 672
WIRE 528 672 528 512
WIRE 528 672 352 672
WIRE 784 688 784 640
WIRE 96 768 80 768
WIRE 160 768 96 768
WIRE 352 768 304 768
WIRE 400 768 352 768
WIRE 528 768 496 768
WIRE 560 768 528 768
WIRE 688 768 656 768
WIRE 96 800 80 800
WIRE 160 800 96 800
WIRE 160 832 128 832
WIRE 128 928 128 832
WIRE 352 928 128 928
WIRE 528 928 528 768
WIRE 528 928 352 928
WIRE -64 960 -64 576
WIRE 688 960 688 768
WIRE 688 960 -64 960
FLAG -416 368 0
FLAG 352 672 th1dt1
FLAG 352 928 th2dt1
FLAG 688 512 th1
FLAG 64 288 th1
FLAG 400 288 th1dt1
FLAG -16 80 poscmd
FLAG 688 768 th2
FLAG 784 688 0
FLAG 832 512 th2deg
FLAG 112 544 tha
FLAG 112 576 fn
FLAG 112 512 tq
FLAG 352 512 th1dt2
FLAG 96 768 tha
FLAG 96 800 fn
FLAG 352 768 th2dt2
SYMBOL voltage -416 224 R0
SYMATTR InstName V1
SYMATTR Value PULSE(0 {mtrrad} 0 1p 1p {mtime})
SYMBOL avg25 -336 176 R0
WINDOW -1 0 0 Left 0
WINDOW 38 -16 20 Left 0
SYMATTR InstName U2
SYMBOL kpp 128 176 R0
SYMATTR InstName U4
SYMBOL def 352 176 R0
SYMATTR InstName X1
SYMBOL integ 480 176 R0
SYMATTR InstName U1
SYMBOL kvi 592 176 R0
SYMATTR InstName U5
SYMBOL add 704 176 R0
SYMATTR InstName U6
SYMBOL kvp 816 176 R0
SYMATTR InstName U7
SYMBOL v_lim 240 176 R0
SYMATTR InstName U8
SYMBOL t_lim 1040 176 R0
SYMATTR InstName U9
SYMBOL t_gen 928 176 R0
SYMATTR InstName U10
SYMBOL integ 448 512 R0
SYMATTR InstName U14
SYMBOL integ 608 512 R0
SYMATTR InstName U15
SYMBOL integ 608 768 R0
SYMATTR InstName U17
SYMBOL integ 448 768 R0
SYMATTR InstName U16
SYMBOL def 16 176 R0
SYMATTR InstName X2
SYMBOL integ -112 176 R0
SYMATTR InstName U22
SYMBOL avg100 -224 176 R0
SYMATTR InstName U3
SYMBOL bv 784 544 R0
SYMATTR InstName B5
SYMATTR Value V=V(th2) / pi * 180 / gretio
SYMBOL mysym/f_gen 16 560 R0
SYMATTR InstName U12
SYMBOL mysym/th1dt2 208 528 R0
SYMATTR InstName U11
SYMBOL mysym/th2dt2 208 784 R0
SYMATTR InstName U13
TEXT -432 -192 Left 2 !.tran 0.0001 12.5 0 0..0001\n.ic V(th1)=0 V(th1dt1)=0 V(th2)=0 V(th2dt1)=0\n.param kpp=10 kvp=30 kvi=10\n.param v_lim=2000/60*2*pi v_min=-v_lim v_max=v_lim\n.param t_min=- t_lim t_max=t_lim  t_lim=8.76\n.param JM=0.00188 JL=0.0196 DM=0.0001 DL=0.0001\n.param kgb=10 dbdeg=0.1 dbrad=dbdeg*pi/180\n.param azposdeg=10 azposrad=azposdeg*pi/180\n.param gretio=81*110/23 mtrposrad=azposrad*gretio\n.param mtrrpm=2000 mtrrad=mtrrpm/60*2*pi\n.param mtime=mtrposrad/mtrrad
